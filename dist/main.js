!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);(()=>{let e;window.addEventListener("DOMContentLoaded",()=>{(e=new n.WebGLCanvas(800,600)).clear(),e.add_shaders("shaders/vertex_shader.vs","shaders/fragment_shader.fs"),e.load_shaders(),console.log(e),setTimeout(()=>{e.initilize_shader_program()},1e3)})})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2),i=r(3);t.WebGLCanvas=class{constructor(e,t){this.program_info=null,this.shaderProgram=null,this.shaders=[],this.width=e,this.height=t,this.canvas=this.create_canvas(),this.gl=this.init_gl_context()}add_shaders(...e){console.log(`Adding ${e.length} shader${e.length>1?"'s":""}...`),e.forEach(e=>{this.shaders.push(new i.Shader(e)),console.log(`Added shader from file \`${e}\``)})}initilize_shader_program(){const e=this.gl.createProgram();if(null==e)throw new Error("Unable to create the shader program");if(this.shaderProgram=e,this.shaders.forEach(e=>{this.gl.attachShader(this.shaderProgram,e.gl_shader)}),this.gl.linkProgram(this.shaderProgram),!this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS))throw new Error(`Unable to initialize the shader program:\n\n      ${this.gl.getProgramInfoLog(this.shaderProgram)}`);this.program_info=new n.ProgramInfo(this.gl.getAttribLocation(this.shaderProgram,"aVertexPosition"),this.gl.getAttribLocation(this.shaderProgram,"uProjectionMatrix"),this.gl.getAttribLocation(this.shaderProgram,"uModelViewMatrix")),console.log("Shader program initilized and linked.")}clear(){this.gl.clearColor(.2,.2,.2,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}load_shaders(){this.shaders.forEach(e=>{e.init(this.gl).then(()=>{console.log(`Shader loaded and ready: ${e.toString()}`)}).catch(e=>{console.error("A shader failed to load:\n",e)})})}create_canvas(){const e=document.createElement("canvas");return e.setAttribute("height",this.height.toString()),e.setAttribute("width",this.width.toString()),document.body.appendChild(e),console.log("Canvas created and added to body."),e}init_gl_context(){const e=this.canvas.getContext("webgl");if(e)return console.log("Successfully acquired WebGl Render Context,"),e;throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ProgramInfo=class{constructor(e,t,r){this.attribLocations={vertexPosition:e},this.uniformLocations={modelViewMatrix:r,projectionMatrix:t}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{h(n.next(e))}catch(e){o(e)}}function a(e){try{h(n.throw(e))}catch(e){o(e)}}function h(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}h((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(4);t.Shader=class{constructor(e,t=-1){switch(this.gl_shader=null,this.gl_shader_type=t,this.gl_shader_type){case WebGLRenderingContext.VERTEX_SHADER:this.shader_type="VERTEX_SHADER";break;case WebGLRenderingContext.FRAGMENT_SHADER:this.shader_type="FRAGMENT_SHADER";break;default:this.shader_type="Unknown"}if(/.+\.(?:vs|fs)/.test(e)?(this.file_name=e,this.src=null):(this.src=e,this.file_name=null),null!=this.file_name){const e=i.Utils.get_file_ext(this.file_name);if(null==e)throw new Error(`Invalid file extention: .${e}`);"vs"===e?(this.gl_shader_type=WebGLRenderingContext.VERTEX_SHADER,this.shader_type="VERTEX_SHADER"):(this.gl_shader_type=WebGLRenderingContext.FRAGMENT_SHADER,this.shader_type="FRAGMENT_SHADER")}}toString(){return`{\n  file: ${this.file_name},\n  type: ${this.shader_type},\n  src: \n    ${this.src}\n}`}init(e){return n(this,void 0,void 0,function*(){if(!this.src&&!this.file_name)throw new Error("File name and shader source is `null` | Unknown error");this.file_name&&(this.src=yield i.Utils.fetch_file_text(this.file_name)),this.load_shader(e)})}load_shader(e){if(!this.src)throw new Error("Shader source is not available!");const t=e.createShader(this.gl_shader_type);if(e.shaderSource(t,this.src),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS)){const r=e.getShaderInfoLog(t);throw e.deleteShader(t),new Error(`An error occurred compiling the shader: ${r}`)}this.gl_shader=t}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{h(n.next(e))}catch(e){o(e)}}function a(e){try{h(n.throw(e))}catch(e){o(e)}}function h(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}h((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});t.Utils=class{static fetch_file_text(e){return n(this,void 0,void 0,function*(){try{return yield(yield fetch(e)).text()}catch(e){throw console.log(e),null}})}static get_file_ext(e){let t=e.match(/.+\.(\w{2})/);return null==t?null:t[1]}}}]);